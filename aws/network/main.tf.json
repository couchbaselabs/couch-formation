{
    "provider": {
        "aws": [
            {
                "region": "${var.region_name}"
            }
        ]
    },
    "resource": {
        "aws_internet_gateway": {
            "cf_gw": [
                {
                    "depends_on": [
                        "aws_vpc.cf_vpc"
                    ],
                    "tags": {
                        "Environment": "${var.cf_env_name}",
                        "Name": "${var.cf_env_name}-gw"
                    },
                    "vpc_id": "${aws_vpc.cf_vpc.id}"
                }
            ]
        },
        "aws_route_table": {
            "cf_rt": [
                {
                    "depends_on": [
                        "aws_internet_gateway.cf_gw",
                        "aws_vpc.cf_vpc"
                    ],
                    "route":  [
                      {
                        "carrier_gateway_id": "",
                        "cidr_block": "0.0.0.0/0",
                        "ipv6_cidr_block": null,
                        "gateway_id": "${aws_internet_gateway.cf_gw.id}",
                        "core_network_arn": "",
                        "destination_prefix_list_id": "",
                        "egress_only_gateway_id": "",
                        "instance_id": "",
                        "local_gateway_id": "",
                        "nat_gateway_id": "",
                        "network_interface_id": "",
                        "transit_gateway_id": "",
                        "vpc_endpoint_id": "",
                        "vpc_peering_connection_id": ""
                      }
                    ],
                    "tags": {
                        "Environment": "${var.cf_env_name}",
                        "Name": "${var.cf_env_name}-rt"
                    },
                    "vpc_id": "${aws_vpc.cf_vpc.id}"
                }
            ]
        },
        "aws_route_table_association": {
            "cf_subnet_1": [
                {
                    "route_table_id": "${aws_route_table.cf_rt.id}",
                    "subnet_id": "${aws_subnet.cf_subnet_1.id}"
                }
            ],
            "cf_subnet_2": [
                {
                    "route_table_id": "${aws_route_table.cf_rt.id}",
                    "subnet_id": "${aws_subnet.cf_subnet_2.id}"
                }
            ],
            "cf_subnet_3": [
                {
                    "route_table_id": "${aws_route_table.cf_rt.id}",
                    "subnet_id": "${aws_subnet.cf_subnet_3.id}"
                }
            ]
        },
        "aws_security_group": {
            "cf_sg": [
                {
                    "depends_on": [
                        "aws_vpc.cf_vpc"
                    ],
                    "description": "Couchbase Default Security Group",
                    "egress": [
                        {
                            "cidr_blocks": [
                                "0.0.0.0/0"
                            ],
                            "description": "",
                            "from_port": 0,
                            "ipv6_cidr_blocks": [
                                "::/0"
                            ],
                            "prefix_list_ids": [],
                            "security_groups": [],
                            "self": false,
                            "protocol": "-1",
                            "to_port": 0
                        }
                    ],
                    "ingress": [
                        {
                            "cidr_blocks": [
                                "${aws_vpc.cf_vpc.cidr_block}"
                            ],
                            "from_port": 0,
                            "protocol": "-1",
                            "to_port": 0,
                            "description": "",
                            "ipv6_cidr_blocks": [],
                            "prefix_list_ids": [],
                            "security_groups": [],
                            "self": false
                        },
                        {
                            "cidr_blocks": [
                                "0.0.0.0/0"
                            ],
                            "from_port": 22,
                            "protocol": "tcp",
                            "to_port": 22,
                            "description": "",
                            "ipv6_cidr_blocks": [],
                            "prefix_list_ids": [],
                            "security_groups": [],
                            "self": false
                        },
                        {
                            "cidr_blocks": [
                                "0.0.0.0/0"
                            ],
                            "from_port": 8091,
                            "protocol": "tcp",
                            "to_port": 8097,
                            "description": "",
                            "ipv6_cidr_blocks": [],
                            "prefix_list_ids": [],
                            "security_groups": [],
                            "self": false
                        },
                        {
                            "cidr_blocks": [
                                "0.0.0.0/0"
                            ],
                            "from_port": 9123,
                            "protocol": "tcp",
                            "to_port": 9123,
                            "description": "",
                            "ipv6_cidr_blocks": [],
                            "prefix_list_ids": [],
                            "security_groups": [],
                            "self": false
                        },
                        {
                            "cidr_blocks": [
                                "0.0.0.0/0"
                            ],
                            "from_port": 9140,
                            "protocol": "tcp",
                            "to_port": 9140,
                            "description": "",
                            "ipv6_cidr_blocks": [],
                            "prefix_list_ids": [],
                            "security_groups": [],
                            "self": false
                        },
                        {
                            "cidr_blocks": [
                                "0.0.0.0/0"
                            ],
                            "from_port": 11210,
                            "protocol": "tcp",
                            "to_port": 11210,
                            "description": "",
                            "ipv6_cidr_blocks": [],
                            "prefix_list_ids": [],
                            "security_groups": [],
                            "self": false
                        },
                        {
                            "cidr_blocks": [
                                "0.0.0.0/0"
                            ],
                            "from_port": 11280,
                            "protocol": "tcp",
                            "to_port": 11280,
                            "description": "",
                            "ipv6_cidr_blocks": [],
                            "prefix_list_ids": [],
                            "security_groups": [],
                            "self": false
                        },
                        {
                            "cidr_blocks": [
                                "0.0.0.0/0"
                            ],
                            "from_port": 11207,
                            "protocol": "tcp",
                            "to_port": 11207,
                            "description": "",
                            "ipv6_cidr_blocks": [],
                            "prefix_list_ids": [],
                            "security_groups": [],
                            "self": false
                        },
                        {
                            "cidr_blocks": [
                                "0.0.0.0/0"
                            ],
                            "from_port": 18091,
                            "protocol": "tcp",
                            "to_port": 18097,
                            "description": "",
                            "ipv6_cidr_blocks": [],
                            "prefix_list_ids": [],
                            "security_groups": [],
                            "self": false
                        }
                    ],
                    "name": "${var.cf_env_name}-sg",
                    "tags": {
                        "Environment": "${var.cf_env_name}",
                        "Name": "${var.cf_env_name}-sg"
                    },
                    "vpc_id": "${aws_vpc.cf_vpc.id}"
                }
            ]
        },
        "aws_subnet": {
            "cf_subnet_1": [
                {
                    "availability_zone": "${var.cf_subnet_az_1}",
                    "cidr_block": "${var.cf_subnet_cidr_1}",
                    "map_public_ip_on_launch": true,
                    "tags": {
                        "Environment": "${var.cf_env_name}",
                        "Name": "${var.cf_env_name}-subnet-1"
                    },
                    "vpc_id": "${aws_vpc.cf_vpc.id}"
                }
            ],
            "cf_subnet_2": [
                {
                    "availability_zone": "${var.cf_subnet_az_2}",
                    "cidr_block": "${var.cf_subnet_cidr_2}",
                    "map_public_ip_on_launch": true,
                    "tags": {
                        "Environment": "${var.cf_env_name}",
                        "Name": "${var.cf_env_name}-subnet-2"
                    },
                    "vpc_id": "${aws_vpc.cf_vpc.id}"
                }
            ],
            "cf_subnet_3": [
                {
                    "availability_zone": "${var.cf_subnet_az_3}",
                    "cidr_block": "${var.cf_subnet_cidr_3}",
                    "map_public_ip_on_launch": true,
                    "tags": {
                        "Environment": "${var.cf_env_name}",
                        "Name": "${var.cf_env_name}-subnet-3"
                    },
                    "vpc_id": "${aws_vpc.cf_vpc.id}"
                }
            ]
        },
        "aws_vpc": {
            "cf_vpc": [
                {
                    "cidr_block": "${var.cf_vpc_cidr}",
                    "tags": {
                        "Environment": "${var.cf_env_name}",
                        "Name": "${var.cf_env_name}-vpc"
                    }
                }
            ]
        }
    },
    "variable": {
        "cf_env_name": [
            {
                "default": "dev10db",
                "description": "Couchbase cluster name",
                "type": "string"
            }
        ],
        "cf_subnet_az_1": [
            {
                "default": "us-east-2a",
                "description": "Availability Zone",
                "type": "string"
            }
        ],
        "cf_subnet_az_2": [
            {
                "default": "us-east-2b",
                "description": "Availability Zone",
                "type": "string"
            }
        ],
        "cf_subnet_az_3": [
            {
                "default": "us-east-2c",
                "description": "Availability Zone",
                "type": "string"
            }
        ],
        "cf_subnet_cidr_1": [
            {
                "default": "10.11.1.0/24",
                "description": "Subnet CIDR",
                "type": "string"
            }
        ],
        "cf_subnet_cidr_2": [
            {
                "default": "10.11.2.0/24",
                "description": "Subnet CIDR",
                "type": "string"
            }
        ],
        "cf_subnet_cidr_3": [
            {
                "default": "10.11.3.0/24",
                "description": "Subnet CIDR",
                "type": "string"
            }
        ],
        "cf_vpc_cidr": [
            {
                "default": "10.11.0.0/16",
                "description": "VPC CIDR",
                "type": "string"
            }
        ],
        "region_name": [
            {
                "default": "us-east-2",
                "description": "Region name",
                "type": "string"
            }
        ]
    }
}
